
type TTest = record str: string; x,y: Int32; end;
type TTestArray = array of record lol: Int32; data:string; end;


func main();
  var a: TTestArray;
  var b: TTestArray;
  a.setlen(1000);
  var h := a.High();
  for(var j:=0; j <= h; j+=1)
    a[j].data := 'hello' + ' bar'

  b := a;
end;

for(var i:=0; i < 100; i+=1)
  main()


var b: TTestArray;
b.Setlen(10000);
b[100].data := 'foo'+'bar'
b[66].data := nil

var t: array of char;
t.setlen(1000000);

print t._refcnt();
